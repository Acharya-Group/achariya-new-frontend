(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,71290,e=>{"use strict";e.s(["useGallery",()=>o]);var a=e.i(54616),t=e.i(66027),r=e.i(12598),s=e.i(63816);let l=e=>(0,t.useQuery)({queryKey:["gallery",e],queryFn:async()=>{let{data:a}=await s.default.get("/gallery/".concat(e));return a.data},enabled:!!e}),o=()=>{let e=(0,r.useQueryClient)(),o=(0,t.useQuery)({queryKey:["galleries"],queryFn:async()=>{let{data:e}=await s.default.get("/gallery");return e.data}}),n=(0,a.useMutation)({mutationFn:e=>{let{category:a}=e;return s.default.post("/gallery/create-category",{category:a})},onSuccess:()=>e.invalidateQueries({queryKey:["galleries"]})}),i=(0,a.useMutation)({mutationFn:e=>{let{category:a,images:t}=e,r=new FormData;return t.forEach(e=>r.append("images",e)),r.append("category",a),s.default.post("/gallery/add-images",r,{headers:{"Content-Type":"multipart/form-data"}})},onSuccess:()=>e.invalidateQueries({queryKey:["galleries"]})}),u=(0,a.useMutation)({mutationFn:e=>{let{categoryId:a,imageId:t,image:r}=e,l=new FormData;return l.append("image",r),s.default.put("/gallery/".concat(a,"/image/").concat(t),l,{headers:{"Content-Type":"multipart/form-data"}})},onSuccess:(a,t)=>{e.invalidateQueries({queryKey:["galleries"]}),e.invalidateQueries({queryKey:["gallery",t.categoryId]})}});return{allGalleries:o,useSingleGallery:l,createCategory:n,addImagesToCategory:i,updateImage:u,deleteImage:(0,a.useMutation)({mutationFn:e=>{let{categoryId:a,imageId:t}=e;return s.default.delete("/gallery/".concat(a,"/image/").concat(t))},onSuccess:(a,t)=>{e.invalidateQueries({queryKey:["galleries"]}),e.invalidateQueries({queryKey:["gallery",t.categoryId]})}}),deleteGallery:(0,a.useMutation)({mutationFn:e=>s.default.delete("/gallery/".concat(e)),onSuccess:()=>e.invalidateQueries({queryKey:["galleries"]})})}}},63004,e=>{"use strict";e.s(["default",()=>n]);var a=e.i(43476),t=e.i(71645),r=e.i(38298),s=e.i(57688),l=e.i(5766),o=e.i(71290);let n=()=>{var e;let{allGalleries:n,createCategory:i,addImagesToCategory:u}=(0,o.useGallery)(),[d,c]=(0,t.useState)(!1),[g,y]=(0,t.useState)(""),[m,p]=(0,t.useState)(""),[f,h]=(0,t.useState)([]),[x,v]=(0,t.useState)([]),[b,w]=(0,t.useState)([]);return((0,t.useEffect)(()=>c(!0),[]),(0,t.useEffect)(()=>{n.data&&w(n.data)},[n.data]),(0,t.useEffect)(()=>()=>x.forEach(e=>URL.revokeObjectURL(e)),[x]),d)?(0,a.jsx)(r.default,{children:(0,a.jsxs)("div",{className:"mx-auto bg-white p-6 rounded-2xl shadow-md",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Add Gallery Images"}),n.isLoading&&(0,a.jsx)("p",{className:"text-center mt-4",children:"Loading categories..."}),n.isError&&(0,a.jsxs)("p",{className:"text-center mt-4 text-red-500",children:["Error: ",null==(e=n.error)?void 0:e.message]}),!n.isLoading&&!n.isError&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-4 flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:m,onChange:e=>p(e.target.value),placeholder:"New Category",className:"flex-1 px-4 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-[#7a0706]"}),(0,a.jsx)("button",{onClick:()=>{let e=m.trim();return e?b.some(a=>a.category.toLowerCase()===e.toLowerCase())?l.default.error("Category already exists!"):void i.mutate({category:e},{onSuccess:()=>{l.default.success("Category added successfully!"),p(""),y(e)},onError:()=>l.default.error("Failed to add category!")}):l.default.error("Enter a category name")},disabled:"pending"===i.status,className:"px-4 py-2 bg-primary cursor-pointer text-white rounded-lg hover:bg-secondary transition ".concat("pending"===i.status?"opacity-50 cursor-not-allowed":""),children:"pending"===i.status?"Adding...":"Add"})]}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)("select",{value:g,onChange:e=>y(e.target.value),className:"w-full px-4 py-2 border cursor-pointer rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-[#7a0706]",children:[(0,a.jsx)("option",{value:"",children:"Select Category"}),b.map(e=>(0,a.jsx)("option",{value:e.category,children:e.category},e._id))]})}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("input",{type:"file",multiple:!0,accept:"image/*",onChange:e=>{if(e.target.files){let a=Array.from(e.target.files);h(a),v(a.map(e=>URL.createObjectURL(e)))}},className:"w-full px-4 py-2 border rounded-lg shadow-sm cursor-pointer focus:outline-none focus:ring-2 focus:ring-[#7a0706]"}),x.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-4 mt-2",children:x.map((e,t)=>(0,a.jsx)(s.default,{src:e,alt:"preview-".concat(t),width:128,height:128,className:"w-32 h-32 object-cover rounded-lg border"},t))})]}),(0,a.jsx)("button",{onClick:()=>g?f.length?void u.mutate({category:g,images:f},{onSuccess:()=>{l.default.success("Images uploaded successfully!"),h([]),v([])},onError:()=>l.default.error("Failed to upload images!")}):l.default.error("Select image(s)"):l.default.error("Select a category"),disabled:"pending"===u.status,className:"w-full px-4 py-2 bg-secondary text-white rounded-lg hover:bg-primary cursor-pointer transition ".concat("pending"===u.status?"opacity-50 cursor-not-allowed":""),children:"pending"===u.status?"Uploading...":"Add Images to Category"})]})]})}):null}}]);