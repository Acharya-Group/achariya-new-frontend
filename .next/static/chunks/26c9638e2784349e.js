(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,19810,e=>{"use strict";e.s(["default",()=>c]);var t=e.i(63816),s=e.i(66027),a=e.i(54616),l=e.i(12598);let c=()=>{let e=(0,l.useQueryClient)(),c=(0,s.useQuery)({queryKey:["contacts"],queryFn:async()=>{let{data:e}=await t.default.get("/Contact");return Array.isArray(e.data)?e.data:[]},initialData:[]}),r=(0,a.useMutation)({mutationFn:async e=>{let{data:s}=await t.default.post("/Contact",e);return s.data},onSuccess:t=>{e.setQueryData(["contacts"],function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[...e,t]})}});return{allContacts:c,createContact:r,updateContact:(0,a.useMutation)({mutationFn:async e=>{let{data:s}=await t.default.put("/Contact/".concat(e._id),e);return s.data},onSuccess:t=>{e.setQueryData(["contacts"],function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(e=>e._id===t._id?t:e)})}}),deleteContact:(0,a.useMutation)({mutationFn:async e=>(await t.default.delete("/Contact/".concat(e)),e),onSuccess:t=>{e.setQueryData(["contacts"],function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter(e=>e._id!==t)})}})}}},46399,e=>{"use strict";e.s(["default",()=>d]);var t=e.i(43476),s=e.i(71645),a=e.i(38298),l=e.i(30955),c=e.i(5766),r=e.i(19810);let d=()=>{var e;let[d,n]=(0,s.useState)(!1),[i,o]=(0,s.useState)(1),{allContacts:u,updateContact:x,deleteContact:h}=(0,r.default)();if((0,s.useEffect)(()=>{n(!0)},[]),(0,s.useEffect)(()=>{if(u.isSuccess&&c.default.success("Contacts fetched successfully!"),u.isError){var e;c.default.error((null==(e=u.error)?void 0:e.message)||"Failed to fetch contacts")}},[u.isSuccess,u.isError,null==(e=u.error)?void 0:e.message]),!d)return null;if(u.isLoading)return(0,t.jsx)(a.default,{children:(0,t.jsx)("p",{children:"Loading contacts..."})});let p=u.data,y=Math.ceil(p.length/5),m=5*i,f=p.slice(m-5,m);return(0,t.jsx)(a.default,{children:(0,t.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-md",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Contact Enquiries"}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-[900px] w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-secondary text-white",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"#"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Date"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Name"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Phone"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"District"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"State"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Message"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Status"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map((e,s)=>{var a;return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"px-4 py-2",children:(i-1)*5+s+1}),(0,t.jsx)("td",{className:"px-4 py-2",children:null==(a=e.createdAt)?void 0:a.split("T")[0]}),(0,t.jsx)("td",{className:"px-4 py-2",children:e.name}),(0,t.jsx)("td",{className:"px-4 py-2",children:e.number}),(0,t.jsx)("td",{className:"px-4 py-2",children:e.district}),(0,t.jsx)("td",{className:"px-4 py-2",children:e.state}),(0,t.jsx)("td",{className:"px-4 py-2",children:(0,t.jsx)("div",{className:"w-40 h-20 p-2 border rounded overflow-y-auto",children:e.message})}),(0,t.jsx)("td",{className:"px-4 py-2",children:(0,t.jsxs)("select",{value:e.status||"pending",onChange:t=>{var s;return s=t.target.value,void x.mutate({...e,status:s},{onSuccess:()=>c.default.success("Contact status updated!"),onError:()=>c.default.error("Failed to update status")})},className:"px-2 py-1 rounded border-[#7a0706] border-[2px]",children:[(0,t.jsx)("option",{value:"pending",children:"Pending"}),(0,t.jsx)("option",{value:"resolve",children:"Resolve"})]})}),(0,t.jsxs)("td",{className:"px-4 py-2",children:["  ",(0,t.jsx)("button",{onClick:()=>{var t;return t=e._id,void(confirm("Are you sure you want to delete this contact?")&&h.mutate(t,{onSuccess:()=>c.default.success("Contact deleted!"),onError:()=>c.default.error("Failed to delete contact")}))},className:"p-2 cursor-pointer bg-red-500 text-white rounded hover:bg-red-600 disabled:opacity-50",children:(0,t.jsx)(l.FaTrash,{})})]})]},e._id)})})]})}),(0,t.jsxs)("div",{className:"flex justify-center items-center gap-2 mt-4",children:[(0,t.jsx)("button",{disabled:1===i,onClick:()=>o(e=>e-1),className:"px-3 py-1 bg-gray-200 rounded disabled:opacity-50",children:"Prev"}),(0,t.jsxs)("span",{children:["Page ",i," of ",y||1]}),(0,t.jsx)("button",{disabled:i===y,onClick:()=>o(e=>e+1),className:"px-3 py-1 bg-gray-200 rounded disabled:opacity-50",children:"Next"})]})]})})}}]);