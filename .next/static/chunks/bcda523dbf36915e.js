(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31819,e=>{"use strict";e.s(["usePopup",()=>r]);var t=e.i(54616),s=e.i(66027),a=e.i(12598),l=e.i(63816);let r=()=>{let e=(0,a.useQueryClient)(),r=(0,s.useQuery)({queryKey:["popups"],queryFn:async()=>{let{data:e}=await l.default.get("/Popup");return e.popups}}),i=(0,t.useMutation)({mutationFn:async e=>{let{image:t,link:s}=e,a=new FormData;a.append("image",t),a.append("link",s),await l.default.post("/Popup",a,{headers:{"Content-Type":"multipart/form-data"}})},onSuccess:()=>{e.invalidateQueries({queryKey:["popups"]})}});return{allPopups:r,addPopup:i,deletePopup:(0,t.useMutation)({mutationFn:async e=>{await l.default.delete("/Popup/".concat(e))},onSuccess:()=>{e.invalidateQueries({queryKey:["popups"]})}}),updatePopup:(0,t.useMutation)({mutationFn:async e=>{let{id:t,image:s,link:a}=e,r=new FormData;s&&r.append("image",s),r.append("link",a),await l.default.put("/Popup/".concat(t),r,{headers:{"Content-Type":"multipart/form-data"}})},onSuccess:()=>{e.invalidateQueries({queryKey:["popups"]})}})}}},19188,e=>{"use strict";e.s(["default",()=>d]);var t=e.i(43476),s=e.i(71645),a=e.i(38298),l=e.i(30955),r=e.i(57688),i=e.i(5766),n=e.i(31819);let d=()=>{var e;let{allPopups:d,deletePopup:u,updatePopup:o}=(0,n.usePopup)(),[c,p]=(0,s.useState)(!1),[x,h]=(0,s.useState)(1),[m,y]=(0,s.useState)(null),[b,g]=(0,s.useState)(null),[f,j]=(0,s.useState)(null),[v,N]=(0,s.useState)("");if((0,s.useEffect)(()=>p(!0),[]),!c)return null;if(d.isLoading)return(0,t.jsx)(a.default,{children:(0,t.jsx)("p",{className:"text-center mt-4",children:"Loading popup..."})});if(d.isError)return(0,t.jsx)(a.default,{children:(0,t.jsxs)("p",{className:"text-center mt-4 text-red-500",children:["Error: ",null==(e=d.error)?void 0:e.message]})});let w=d.data||[],P=4*x,k=P-4,C=w.slice(k,P),S=Math.ceil(w.length/4);return(0,t.jsx)(a.default,{children:(0,t.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-md",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"All Popups"}),(0,t.jsxs)("div",{className:"overflow-x-auto",children:[(0,t.jsxs)("table",{className:"min-w-[200px] w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-secondary text-white",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Sr no."}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Link"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Image"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:C.map((e,s)=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"px-4 py-2",children:k+s+1}),(0,t.jsx)("td",{className:"px-4 py-2",children:e.link}),(0,t.jsx)("td",{className:"px-4 py-2",children:(0,t.jsx)(r.default,{height:64,width:96,src:e.image,alt:"popup ".concat(e._id),className:"w-24 h-16 object-cover rounded"})}),(0,t.jsxs)("td",{className:"px-4 py-2 flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>(e=>{y(e),g(e.image),j(null),N(e.link)})(e),className:"p-2 bg-blue-500 cursor-pointer text-white rounded hover:bg-blue-600",children:(0,t.jsx)(l.FaEdit,{})}),(0,t.jsx)("button",{onClick:()=>{var t;return t=e._id,void(confirm("Are you sure you want to delete this Image?")&&u.mutate(t,{onSuccess:()=>i.default.success("Popup deleted successfully!"),onError:()=>i.default.error("Failed to delete Popup!")}))},className:"p-2 cursor-pointer bg-red-500 text-white rounded hover:bg-red-600",children:(0,t.jsx)(l.FaTrash,{})})]})]},e._id))})]}),(0,t.jsxs)("div",{className:"flex justify-center items-center gap-2 mt-4",children:[(0,t.jsx)("button",{disabled:1===x,onClick:()=>h(e=>e-1),className:"px-3 py-1 bg-gray-200 rounded disabled:opacity-50",children:"Prev"}),(0,t.jsxs)("span",{children:["Page ",x," of ",S]}),(0,t.jsx)("button",{disabled:x===S,onClick:()=>h(e=>e+1),className:"px-3 py-1 bg-gray-200 rounded disabled:opacity-50",children:"Next"})]})]}),m&&(0,t.jsx)("div",{className:"fixed inset-0 backdrop-blur-3xl bg-opacity-50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white border border-blue-900 p-6 rounded-xl w-96 relative",children:[(0,t.jsx)("button",{onClick:()=>y(null),className:"absolute top-2 right-2 text-gray-500 hover:animate-spin cursor-pointer hover:text-gray-800",children:(0,t.jsx)(l.FaTimes,{})}),(0,t.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Update Popup"}),(0,t.jsx)("input",{type:"file",onChange:e=>{var t;let s=null==(t=e.target.files)?void 0:t[0];s&&(j(s),g(URL.createObjectURL(s)))},className:"mb-4 cursor-pointer bg-secondary text-white rounded-2xl inline py-2 px-3 max-w-[320px]"}),(0,t.jsx)("input",{type:"text",value:v,onChange:e=>N(e.target.value),placeholder:"Enter link",className:"w-full border px-3 py-2 rounded mb-4"}),b&&(0,t.jsx)(r.default,{height:160,width:160,src:b,alt:"Preview",className:"w-full h-40 object-cover rounded mb-4"}),(0,t.jsx)("button",{onClick:()=>m?v.trim()?void o.mutate({id:m._id,image:f||void 0,link:v},{onSuccess:()=>{i.default.success("Popup updated successfully!"),y(null),j(null),g(null),N("")},onError:()=>i.default.error("Failed to update Popup!")}):i.default.error("Link cannot be empty!"):i.default.error("No popup selected!"),disabled:"pending"===o.status,className:"px-4 py-2 bg-secondary cursor-pointer text-white rounded hover:bg-primary ".concat("pending"===o.status?"opacity-50 cursor-not-allowed":""),children:"pending"===o.status?"Updating...":"Update"})]})})]})})}}]);