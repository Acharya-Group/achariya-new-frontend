(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,71290,e=>{"use strict";e.s(["useGallery",()=>i]);var t=e.i(54616),a=e.i(66027),l=e.i(12598),r=e.i(63816);let s=e=>(0,a.useQuery)({queryKey:["gallery",e],queryFn:async()=>{let{data:t}=await r.default.get("/gallery/".concat(e));return t.data},enabled:!!e}),i=()=>{let e=(0,l.useQueryClient)(),i=(0,a.useQuery)({queryKey:["galleries"],queryFn:async()=>{let{data:e}=await r.default.get("/gallery");return e.data}}),d=(0,t.useMutation)({mutationFn:e=>{let{category:t}=e;return r.default.post("/gallery/create-category",{category:t})},onSuccess:()=>e.invalidateQueries({queryKey:["galleries"]})}),n=(0,t.useMutation)({mutationFn:e=>{let{category:t,images:a}=e,l=new FormData;return a.forEach(e=>l.append("images",e)),l.append("category",t),r.default.post("/gallery/add-images",l,{headers:{"Content-Type":"multipart/form-data"}})},onSuccess:()=>e.invalidateQueries({queryKey:["galleries"]})}),u=(0,t.useMutation)({mutationFn:e=>{let{categoryId:t,imageId:a,image:l}=e,s=new FormData;return s.append("image",l),r.default.put("/gallery/".concat(t,"/image/").concat(a),s,{headers:{"Content-Type":"multipart/form-data"}})},onSuccess:(t,a)=>{e.invalidateQueries({queryKey:["galleries"]}),e.invalidateQueries({queryKey:["gallery",a.categoryId]})}});return{allGalleries:i,useSingleGallery:s,createCategory:d,addImagesToCategory:n,updateImage:u,deleteImage:(0,t.useMutation)({mutationFn:e=>{let{categoryId:t,imageId:a}=e;return r.default.delete("/gallery/".concat(t,"/image/").concat(a))},onSuccess:(t,a)=>{e.invalidateQueries({queryKey:["galleries"]}),e.invalidateQueries({queryKey:["gallery",a.categoryId]})}}),deleteGallery:(0,t.useMutation)({mutationFn:e=>r.default.delete("/gallery/".concat(e)),onSuccess:()=>e.invalidateQueries({queryKey:["galleries"]})})}}},96720,e=>{"use strict";e.s(["default",()=>u]);var t=e.i(43476),a=e.i(71645),l=e.i(38298),r=e.i(57688),s=e.i(5766),i=e.i(30955),d=e.i(71290),n=e.i(18566);let u=()=>{let{id:e}=(0,n.useParams)(),{useSingleGallery:u,updateImage:c,deleteImage:o}=(0,d.useGallery)(),{data:y,isLoading:g,isError:m}=u(e),[x,h]=(0,a.useState)(null),[p,b]=(0,a.useState)(null),[f,j]=(0,a.useState)(null);return g?(0,t.jsx)(l.default,{children:"Loading..."}):m||!y?(0,t.jsx)(l.default,{children:"Error loading category!"}):(0,t.jsx)(l.default,{children:(0,t.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-md",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-6",children:y.category}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-[400px] w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-secondary text-white",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Sr No."}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Image"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:y.images.map((e,a)=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"px-4 py-2",children:a+1}),(0,t.jsx)("td",{className:"px-4 py-2",children:(0,t.jsx)(r.default,{src:e.url,width:100,height:100,alt:"Image ".concat(a+1),className:"object-cover h-[100px] w-[100px] rounded"})}),(0,t.jsxs)("td",{className:"px-4 py-2 flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>(e=>{h(e),j(e.url),b(null)})(e),className:"p-2 bg-blue-500 cursor-pointer text-white rounded hover:bg-blue-600",children:(0,t.jsx)(i.FaEdit,{size:14})}),(0,t.jsx)("button",{onClick:()=>{confirm("Are you sure you want to delete this image?")&&o.mutate({categoryId:y._id,imageId:e._id},{onSuccess:()=>s.default.success("Image deleted successfully!"),onError:()=>s.default.error("Failed to delete image!")})},className:"p-2 bg-red-500 text-white cursor-pointer rounded hover:bg-red-600",children:(0,t.jsx)(i.FaTrash,{size:14})})]})]},e._id))})]})}),x&&(0,t.jsx)("div",{className:"fixed inset-0  backdrop-blur-3xl bg-opacity-50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white p-6 border border-blue-900 rounded-xl w-96 relative",children:[(0,t.jsx)("button",{onClick:()=>h(null),className:"absolute top-2 right-2 text-gray-500 hover:animate-spin hover:text-gray-800 cursor-pointer",children:(0,t.jsx)(i.FaTimes,{})}),(0,t.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Update Image"}),(0,t.jsx)("input",{type:"file",onChange:e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];a&&(b(a),j(URL.createObjectURL(a)))},className:"mb-4 bg-secondary text-white rounded-2xl max-w-[300px] inline py-2 px-3"}),f&&(0,t.jsx)(r.default,{src:f,width:200,height:200,alt:"Preview",className:"object-cover h-[200px] w-[200px] rounded mb-4"}),(0,t.jsx)("button",{onClick:()=>{if(!x||!p)return s.default.error("No image selected!");c.mutate({categoryId:y._id,imageId:x._id,image:p},{onSuccess:()=>{s.default.success("Image updated successfully!"),h(null),b(null),j(null)},onError:()=>s.default.error("Failed to update image!")})},className:"px-4 py-2 bg-secondary cursor-pointer text-white rounded hover:bg-primary",children:"Update"})]})})]})})}}]);