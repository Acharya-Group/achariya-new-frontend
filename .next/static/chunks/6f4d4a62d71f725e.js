(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,12895,e=>{"use strict";e.s(["useTestimonials",()=>r]);var t=e.i(66027),a=e.i(54616),s=e.i(12598),i=e.i(63816);let r=()=>{let e=(0,s.useQueryClient)(),r=(0,t.useQuery)({queryKey:["testimonials"],queryFn:async()=>{let{data:e}=await i.default.get("/Testimonial");return e.testimonials}}),l=(0,a.useMutation)({mutationFn:async e=>{let{data:t}=await i.default.post("/Testimonial",e,{headers:{"Content-Type":"multipart/form-data"}});return t},onSuccess:()=>{e.invalidateQueries({queryKey:["testimonials"]})}});return{allTestimonials:r,createTestimonial:l,updateTestimonial:(0,a.useMutation)({mutationFn:async e=>{let{id:t,formData:a}=e,{data:s}=await i.default.put("/Testimonial/".concat(t),a,{headers:{"Content-Type":"multipart/form-data"}});return s},onSuccess:()=>{e.invalidateQueries({queryKey:["testimonials"]})}}),deleteTestimonial:(0,a.useMutation)({mutationFn:async e=>{await i.default.delete("/Testimonial/".concat(e))},onSuccess:()=>{e.invalidateQueries({queryKey:["testimonials"]})}})}}},66851,e=>{"use strict";e.s(["default",()=>u]);var t=e.i(43476),a=e.i(71645),s=e.i(18566),i=e.i(38298),r=e.i(5766),l=e.i(12895),n=e.i(81949),o=e.i(57688);let u=()=>{let e=(0,s.useRouter)(),u=(0,s.useParams)(),d=Array.isArray(u.id)?u.id[0]:u.id,{updateTestimonial:c}=(0,l.useTestimonials)(),[m,p]=(0,a.useState)(""),[f,h]=(0,a.useState)(""),[y,g]=(0,a.useState)(null),[x,b]=(0,a.useState)(null),[v,w]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{d&&(async()=>{try{let{data:e}=await n.default.get("".concat("https://achariya-new-backend.vercel.app/api/v1","/Testimonial/").concat(d));p(e.testimonial.name),h(e.testimonial.description),b(e.testimonial.Image)}catch(a){var e,t;r.default.error((null==a||null==(t=a.response)||null==(e=t.data)?void 0:e.message)||"Failed to load testimonial!")}})()},[d]),(0,t.jsx)(i.default,{children:(0,t.jsxs)("div",{className:"mx-auto bg-white p-6 rounded-2xl shadow-md",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Update Testimonial"}),(0,t.jsxs)("form",{className:"space-y-5",onSubmit:t=>{if(t.preventDefault(),!d)return void r.default.error("Testimonial ID not found!");if(!m||!f)return void r.default.error("Please fill all required fields!");w(!0);let a=new FormData;a.append("name",m),a.append("description",f),y&&a.append("Image",y),c.mutate({id:d,formData:a},{onSuccess:()=>{r.default.success("Testimonial updated successfully!"),w(!1),e.push("/admin/all-testimonial")},onError:e=>{var t,a;r.default.error((null==e||null==(a=e.response)||null==(t=a.data)?void 0:t.message)||"Failed to update testimonial!"),w(!1)}})},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),(0,t.jsx)("input",{type:"text",value:m,onChange:e=>p(e.target.value),placeholder:"Enter name",className:"w-full px-4 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-[#7a0706] focus:border-[#7a0706] hover:border-[#7a0706] transition",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,t.jsx)("textarea",{value:f,onChange:e=>h(e.target.value),rows:4,placeholder:"Enter description",className:"w-full px-4 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-[#7a0706] focus:border-[#7a0706] hover:border-[#7a0706] transition",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Upload Image"}),(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];if(a){g(a);let e=new FileReader;e.onloadend=()=>b(e.result),e.readAsDataURL(a)}},className:"w-full px-4 py-2 border rounded-lg shadow-sm cursor-pointer focus:outline-none focus:ring-2 focus:ring-[#7a0706] focus:border-[#7a0706] hover:border-[#7a0706] transition"}),x&&(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Preview:"}),(0,t.jsx)(o.default,{height:128,width:128,src:x,alt:"Selected Preview",className:"w-32 h-32 object-cover rounded-lg border"})]})]}),(0,t.jsx)("button",{type:"submit",disabled:v,className:"w-full ".concat(v?"bg-primary cursor-not-allowed":"bg-secondary"," text-white py-3 px-4 cursor-pointer rounded-lg shadow-md transition transform hover:bg-primary font-medium"),children:v?"Updating...":"Update Testimonial"})]})]})})}}]);