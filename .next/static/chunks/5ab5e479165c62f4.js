(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,81627,e=>{"use strict";e.s(["useVideo",()=>d]);var t=e.i(54616),r=e.i(66027),s=e.i(12598),i=e.i(63816);let d=()=>{let e=(0,s.useQueryClient)(),d=(0,r.useQuery)({queryKey:["videos"],queryFn:async()=>{try{let{data:e}=await i.default.get("/Video");return e.data||[]}catch(e){throw Error("Failed to fetch videos")}}}),l=(0,t.useMutation)({mutationFn:e=>{let{VideoUrl:t}=e;return i.default.post("/Video",{VideoUrl:t})},onSuccess:()=>e.invalidateQueries({queryKey:["videos"]})});return{allVideos:d,addVideo:l,deleteVideo:(0,t.useMutation)({mutationFn:e=>i.default.delete("/Video/".concat(e)),onSuccess:()=>e.invalidateQueries({queryKey:["videos"]})}),updateVideo:(0,t.useMutation)({mutationFn:e=>{let{id:t,VideoUrl:r}=e;return i.default.put("/Video/".concat(t),{VideoUrl:r})},onSuccess:()=>e.invalidateQueries({queryKey:["videos"]})})}}},49756,e=>{"use strict";e.s(["default",()=>a]);var t=e.i(43476),r=e.i(71645),s=e.i(38298),i=e.i(30955),d=e.i(5766),l=e.i(81627);let a=()=>{var e;let{allVideos:a,deleteVideo:o,updateVideo:c}=(0,l.useVideo)(),[n,u]=(0,r.useState)(!1),[p,x]=(0,r.useState)(1),[h,m]=(0,r.useState)(null),[y,b]=(0,r.useState)("");if((0,r.useEffect)(()=>u(!0),[]),!n)return null;if(a.isLoading)return(0,t.jsx)(s.default,{children:(0,t.jsx)("p",{className:"text-center mt-4",children:"Loading videos..."})});if(a.isError)return(0,t.jsx)(s.default,{children:(0,t.jsxs)("p",{className:"text-center mt-4 text-red-500",children:["Error: ",null==(e=a.error)?void 0:e.message]})});let f=a.data||[],v=5*p,j=v-5,g=f.slice(j,v),w=Math.ceil(f.length/5),N=e=>{try{if(!e)return"";if(e.includes("youtu.be/")){let t=e.split("youtu.be/")[1].split("?")[0];return"https://www.youtube.com/embed/".concat(t)}let t=new URL(e).searchParams.get("v");if(t)return"https://www.youtube.com/embed/".concat(t);return e.includes("embed"),e}catch(t){return e}};return(0,t.jsx)(s.default,{children:(0,t.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-md",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"All Videos"}),(0,t.jsxs)("div",{className:"overflow-x-auto",children:[(0,t.jsxs)("table",{className:"min-w-[900px] w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-secondary text-white",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-2 text-left w-[100px]",children:"Sr no."}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Video Url."}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Video"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left w-[150px]",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map((e,r)=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"px-4 py-2 w-[100px]",children:j+r+1}),(0,t.jsx)("td",{className:"px-4 py-2 max-w-[100px]",children:e.VideoUrl}),(0,t.jsx)("td",{className:"px-4 py-2 w-60 h-48",children:(0,t.jsx)("iframe",{width:"100%",height:"100%",src:N(e.VideoUrl),title:"video-".concat(e._id),frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"rounded"})}),(0,t.jsxs)("td",{className:"px-4 py-2 flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>(e=>{m(e),b(e.VideoUrl)})(e),className:"p-2 bg-blue-500 cursor-pointer text-white rounded hover:bg-blue-600",children:(0,t.jsx)(i.FaEdit,{})}),(0,t.jsx)("button",{onClick:()=>{var t;return t=e._id,void(confirm("Are you sure you want to delete this video?")&&o.mutate(t,{onSuccess:()=>d.default.success("Video deleted successfully!"),onError:()=>d.default.error("Failed to delete video!")}))},className:"p-2 cursor-pointer bg-red-500 text-white rounded hover:bg-red-600",children:(0,t.jsx)(i.FaTrash,{})})]})]},e._id))})]}),(0,t.jsxs)("div",{className:"flex justify-center items-center gap-2 mt-4",children:[(0,t.jsx)("button",{disabled:1===p,onClick:()=>x(e=>e-1),className:"px-3 py-1 bg-gray-200 rounded disabled:opacity-50",children:"Prev"}),(0,t.jsxs)("span",{children:["Page ",p," of ",w]}),(0,t.jsx)("button",{disabled:p===w,onClick:()=>x(e=>e+1),className:"px-3 py-1 bg-gray-200 rounded disabled:opacity-50",children:"Next"})]})]}),h&&(0,t.jsx)("div",{className:"fixed inset-0 backdrop-blur-3xl bg-opacity-50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white border border-blue-900 p-6 rounded-xl w-96 relative",children:[(0,t.jsx)("button",{onClick:()=>m(null),className:"absolute top-2 right-2 text-gray-500 cursor-pointer hover:animate-spin hover:text-gray-800",children:(0,t.jsx)(i.FaTimes,{})}),(0,t.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Update Video"}),(0,t.jsx)("input",{type:"text",value:y,onChange:e=>b(e.target.value),placeholder:"Enter YouTube URL",className:"w-full border px-3 py-2 rounded mb-4"}),(0,t.jsx)("div",{className:"w-full h-48 mb-4",children:(0,t.jsx)("iframe",{width:"100%",height:"100%",src:N(y),title:"Preview Video",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"rounded"})}),(0,t.jsx)("button",{onClick:()=>h?y.trim()?void c.mutate({id:h._id,VideoUrl:y},{onSuccess:()=>{d.default.success("Video updated successfully!"),m(null),b("")},onError:()=>d.default.error("Failed to update video!")}):d.default.error("Video URL cannot be empty!"):d.default.error("No video selected!"),disabled:"pending"===c.status,className:"px-4 py-2 cursor-pointer bg-secondary text-white rounded hover:bg-primary ".concat("pending"===c.status?"opacity-50 cursor-not-allowed":""),children:"pending"===c.status?"Updating...":"Update"})]})})]})})}}]);