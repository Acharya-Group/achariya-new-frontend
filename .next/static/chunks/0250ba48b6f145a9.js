(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,71290,e=>{"use strict";e.s(["useGallery",()=>i]);var a=e.i(54616),t=e.i(66027),r=e.i(12598),l=e.i(63816);let s=e=>(0,t.useQuery)({queryKey:["gallery",e],queryFn:async()=>{let{data:a}=await l.default.get("/gallery/".concat(e));return a.data},enabled:!!e}),i=()=>{let e=(0,r.useQueryClient)(),i=(0,t.useQuery)({queryKey:["galleries"],queryFn:async()=>{let{data:e}=await l.default.get("/gallery");return e.data}}),u=(0,a.useMutation)({mutationFn:e=>{let{category:a}=e;return l.default.post("/gallery/create-category",{category:a})},onSuccess:()=>e.invalidateQueries({queryKey:["galleries"]})}),d=(0,a.useMutation)({mutationFn:e=>{let{category:a,images:t}=e,r=new FormData;return t.forEach(e=>r.append("images",e)),r.append("category",a),l.default.post("/gallery/add-images",r,{headers:{"Content-Type":"multipart/form-data"}})},onSuccess:()=>e.invalidateQueries({queryKey:["galleries"]})}),n=(0,a.useMutation)({mutationFn:e=>{let{categoryId:a,imageId:t,image:r}=e,s=new FormData;return s.append("image",r),l.default.put("/gallery/".concat(a,"/image/").concat(t),s,{headers:{"Content-Type":"multipart/form-data"}})},onSuccess:(a,t)=>{e.invalidateQueries({queryKey:["galleries"]}),e.invalidateQueries({queryKey:["gallery",t.categoryId]})}});return{allGalleries:i,useSingleGallery:s,createCategory:u,addImagesToCategory:d,updateImage:n,deleteImage:(0,a.useMutation)({mutationFn:e=>{let{categoryId:a,imageId:t}=e;return l.default.delete("/gallery/".concat(a,"/image/").concat(t))},onSuccess:(a,t)=>{e.invalidateQueries({queryKey:["galleries"]}),e.invalidateQueries({queryKey:["gallery",t.categoryId]})}}),deleteGallery:(0,a.useMutation)({mutationFn:e=>l.default.delete("/gallery/".concat(e)),onSuccess:()=>e.invalidateQueries({queryKey:["galleries"]})})}}},86877,e=>{"use strict";e.s(["default",()=>d]);var a=e.i(43476),t=e.i(38298),r=e.i(71645),l=e.i(71290),s=e.i(57688),i=e.i(5766),u=e.i(22016);let d=()=>{var e;let{allGalleries:d,deleteGallery:n}=(0,l.useGallery)(),[o,c]=(0,r.useState)([]);return(0,r.useEffect)(()=>{d.data&&c(d.data)},[d.data]),(0,a.jsx)(t.default,{children:(0,a.jsxs)("div",{className:"mx-auto bg-white p-6 rounded-2xl shadow-md max-w-6xl",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"All Categories"}),d.isLoading&&(0,a.jsx)("p",{children:"Loading categories..."}),d.isError&&(0,a.jsxs)("p",{className:"text-red-500",children:["Error: ",null==(e=d.error)?void 0:e.message]}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:o.map(e=>(0,a.jsxs)(u.default,{href:"/admin/all-gallery/".concat(e._id),className:"bg-gray-50 p-4 rounded-xl shadow hover:shadow-lg transition relative group",children:[e.images.length>0?(0,a.jsx)(s.default,{src:e.images[0].url,alt:e.category,width:300,height:200,className:"w-full h-40 object-cover rounded-lg mb-2"}):(0,a.jsx)("div",{className:"w-full h-40 bg-gray-200 flex items-center justify-center rounded-lg mb-2",children:(0,a.jsx)("span",{className:"text-gray-500",children:"No Image"})}),(0,a.jsx)("h2",{className:"text-lg font-semibold",children:e.category}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[e.images.length," image",1!==e.images.length?"s":""]}),(0,a.jsx)("button",{onClick:a=>{var t;return t=e._id,void(a.preventDefault(),confirm("Are you sure you want to delete this category?")&&n.mutate(t,{onSuccess:()=>i.default.success("Category deleted!"),onError:()=>i.default.error("Failed to delete category")}))},className:"absolute top-2 right-2 bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 text-sm z-10",children:"Delete"})]},e._id))})]})})}}]);