(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,10430,e=>{"use strict";e.s(["default",()=>l]);var s=e.i(63816),a=e.i(54616),t=e.i(66027),d=e.i(12598);let l=()=>{let e=(0,d.useQueryClient)(),l=(0,t.useQuery)({queryKey:["feedbackComplaints"],queryFn:async()=>{let{data:e}=await s.default.get("/FeedbackAndComplain");return Array.isArray(e.data)?e.data:[]},initialData:[]}),r=(0,a.useMutation)({mutationFn:async e=>{let{data:a}=await s.default.post("/FeedbackAndComplain",e);return a.data},onSuccess:s=>{e.setQueryData(["feedbackComplaints"],function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[...e,s]})}});return{allFeedbacks:l,createFeedback:r,updateFeedback:(0,a.useMutation)({mutationFn:async e=>{let{data:a}=await s.default.put("/FeedbackAndComplain/".concat(e._id),e);return a.data},onSuccess:s=>{e.setQueryData(["feedbackComplaints"],function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(e=>e._id===s._id?s:e)})}}),deleteFeedback:(0,a.useMutation)({mutationFn:async e=>(await s.default.delete("/FeedbackAndComplain/".concat(e)),e),onSuccess:s=>{e.setQueryData(["feedbackComplaints"],function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter(e=>e._id!==s)})}})}}},90505,e=>{"use strict";e.s(["default",()=>i]);var s=e.i(43476),a=e.i(71645),t=e.i(38298),d=e.i(30955),l=e.i(5766),r=e.i(10430);let i=()=>{var e;let[i,c]=(0,a.useState)(!1),[n,u]=(0,a.useState)(1),{allFeedbacks:o,updateFeedback:p,deleteFeedback:x}=(0,r.default)();if((0,a.useEffect)(()=>{c(!0)},[]),(0,a.useEffect)(()=>{if(o.isSuccess&&l.default.success("Feedback & complaints fetched successfully!"),o.isError){var e;l.default.error((null==(e=o.error)?void 0:e.message)||"Failed to fetch data")}},[o.isSuccess,o.isError,null==(e=o.error)?void 0:e.message]),!i)return null;if(o.isLoading)return(0,s.jsx)(t.default,{children:(0,s.jsx)("p",{className:"p-6",children:"Loading data..."})});let h=o.data,m=Math.ceil(h.length/5),y=5*n,j=h.slice(y-5,y);return(0,s.jsx)(t.default,{children:(0,s.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-md",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Feedback & Complaints"}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-[1300px] w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-secondary text-white",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-2",children:"#"}),(0,s.jsx)("th",{className:"px-4 py-2",children:"Date"}),(0,s.jsx)("th",{className:"px-4 py-2",children:"Name"}),(0,s.jsx)("th",{className:"px-4 py-2",children:"Phone"}),(0,s.jsx)("th",{className:"px-4 py-2",children:"District"}),(0,s.jsx)("th",{className:"px-4 py-2",children:"State"}),(0,s.jsx)("th",{className:"px-4 py-2",children:"Form Type"}),(0,s.jsx)("th",{className:"px-4 py-2",children:"Subject"}),(0,s.jsx)("th",{className:"px-4 py-2",children:"Message"}),(0,s.jsx)("th",{className:"px-4 py-2",children:"Status"}),(0,s.jsx)("th",{className:"px-4 py-2",children:"Actions"})]})}),(0,s.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[j.map((e,a)=>{var t;return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-4 py-2",children:(n-1)*5+a+1}),(0,s.jsx)("td",{className:"px-4 py-2",children:null==(t=e.createdAt)?void 0:t.split("T")[0]}),(0,s.jsx)("td",{className:"px-4 py-2",children:e.name}),(0,s.jsx)("td",{className:"px-4 py-2",children:e.number}),(0,s.jsx)("td",{className:"px-4 py-2",children:e.district}),(0,s.jsx)("td",{className:"px-4 py-2",children:e.state}),(0,s.jsx)("td",{className:"px-4 py-2",children:e.formType}),(0,s.jsx)("td",{className:"px-4 py-2",children:e.subject}),(0,s.jsx)("td",{className:"px-4 py-2",children:(0,s.jsx)("div",{className:"w-40 h-20 p-2 border rounded overflow-y-auto",children:e.message})}),(0,s.jsx)("td",{className:"px-4 py-2",children:(0,s.jsxs)("select",{value:e.status||"pending",onChange:s=>{var a;return a=s.target.value,void p.mutate({_id:e._id,status:a},{onSuccess:()=>l.default.success("Status updated successfully"),onError:()=>l.default.error("Failed to update status")})},className:"px-2 py-1 rounded border-[#7a0706] border-[2px]",children:[(0,s.jsx)("option",{value:"pending",children:"Pending"}),(0,s.jsx)("option",{value:"resolved",children:"Resolved"})]})}),(0,s.jsx)("td",{className:"px-4 py-2",children:(0,s.jsx)("button",{onClick:()=>{var s;return s=e._id,void(confirm("Are you sure you want to delete this entry?")&&x.mutate(s,{onSuccess:()=>l.default.success("Deleted successfully"),onError:()=>l.default.error("Failed to delete")}))},className:"p-2 cursor-pointer bg-red-500 text-white rounded hover:bg-red-600",children:(0,s.jsx)(d.FaTrash,{})})})]},e._id)}),0===j.length&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:10,className:"px-4 py-2 text-center text-gray-500",children:"No entries found"})})]})]})}),(0,s.jsxs)("div",{className:"flex justify-center items-center gap-2 mt-4",children:[(0,s.jsx)("button",{disabled:1===n,onClick:()=>u(e=>e-1),className:"px-3 py-1 bg-gray-200 rounded disabled:opacity-50",children:"Prev"}),(0,s.jsxs)("span",{children:["Page ",n," of ",m||1]}),(0,s.jsx)("button",{disabled:n===m,onClick:()=>u(e=>e+1),className:"px-3 py-1 bg-gray-200 rounded disabled:opacity-50",children:"Next"})]})]})})}}]);